{% extends 'kb_admin/base.html' %}
{% load custom_tags %}

{% block admin-title %}Groups{% endblock %}

{% block admin-header %}
    <h1 class="fs-3 text-white fw-lighter mb-0">All Groups</h1>
    <div class="d-flex align-items-center">
        <a href="{% url 'create-group' %}" class="text-decoration-none text-white me-4 text-center" data-bs-toggle="tooltip" title="New article">
            {% include 'includes/plus-square.svg' with height="28" width="28" %}
        </a>
    <a href="{% url 'admin-dashboard' %}" class="btn btn-purple">Admin Dashboard</a>
    </div>
{% endblock %}

{% block admin-content %}
    <div class="p-3">
        <table class="table table-hover">
            <thead class="bg-purple">
            <tr>
                <th scope="col">Group Name</th>
                <th scope="col">Total Members</th>
            </tr>
            </thead>
            <tbody>
            {% for group in groups %}
                <tr onclick="window.location.href='{% url 'group-detail' pk=group.pk %}'" class="cursor-pointer">
                    <td>{{ group.name|title }}</td>
                    <td>{{ group.users.all|length }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="4">
                        No groups yet.
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}




